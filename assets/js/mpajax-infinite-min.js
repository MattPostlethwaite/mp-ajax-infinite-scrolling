"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function($){function e(e){var a=N>1?"Scroll up to load the previous pages":"Scroll up to load the previous page";$("html").addClass("mpajax"),1!=_&&($("body").prepend('<div class="mpajax-spacer" style="height: 10px"></div>'),0==P.scrollTop()&&window.scrollTo(0,10)),$(e+" .cards").attr("id","mpajax-content-"+_).addClass("mpajax-content-wrapper loaded").attr("data-section-name","mpajax-content-wrapper-page-"+_).attr("data-section-url",f),0!==N&&0===$("."+y).length&&$(e+" .mpajax-content-wrapper.loaded:first").before(D("Load Previous",v)+"\n"+E(a,"load-previous-message")+"\n"+I(N,U,y)),T<=L&&0===$("."+b).length&&$(e).append(I(T,M,b)+"\n"+D("Load More",x)),$(".module-pagination, .woocommerce-pagination, .results-count, .woocommerce-result-count").remove()}function a(e,a,t){var o=e;return a=(void 0===a?"undefined":_typeof(a))===_typeof("string")&&a,t=(void 0===t?"undefined":_typeof(t))===_typeof("string")?t:m,a&&(o=o.replace(/page\/[0-9]*\//,a)),o=o.replace(/\?(.*)/,t)}function t(e,a,t){var o=P.scrollTop(),n=P.height(),r={section_name:"",section_url:""},s=o+n;return(void 0===a?"undefined":_typeof(a))===_typeof(1)&&((void 0===t?"undefined":_typeof(t))!==_typeof(!0)&&(t=!1),t?s+=a:s-=a),$(e).each(function(){var e=$(this),a=e.offset().top;Math.round(a)<Math.round(s)&&(r.section_url=e.attr("data-section-url"),r.section_name=e.attr("data-section-name"))}),r}function o(){if(window.history.replaceState){var e=Math.round(P.height()/2),a=".mpajax-content-wrapper",o=t(a,e).section_url;""!=o&&o!=O&&(window.location.href!=o&&history.replaceState(null,null,o),O=o)}}function n(){var e=P.height(),a=$(".mpajax-content-wrapper.loaded").last(),t=a.offset().top;if(Math.round(P.scrollTop()+e)>Math.round(t)&&(!$("body").hasClass("loading")&&T<=L&&p("#content .cards",M,"."+b),T>L))return s("."+x,"No more to load",!0),!1}function r(){var e=$(".mpajax-content-wrapper.loaded:first"),a=e.offset().top;P.scrollTop()<a&&(!$("body").hasClass("loading")&&N>0&&p("#content .cards",U,".mpajax-placeholder-prev"),$(".mpajax-spacer").remove())}function s(e,a,t){$(e).html(a),t?$(e).addClass("disabled"):$(e).removeClass("disabled")}function p(e,a,t){var o=t.replace("."+w+"-",""),n="."+h+"-"+o,r="next"===o?"Load More":"Load Previous";return $("body").addClass("loading"),s(n,"Loading more "+j,!0),$("."+S+"-"+o).remove(),$(t).load(a+" "+e,function(e,a,p){if(4==p.readyState&&"error"==a)return l(p,o),!1;$(this).removeClass("mpajax-placeholder "+t.replace(".","")).addClass("mpajax-content-wrapper loaded"),i(o),s(n,r,!1),$("body").removeClass("loading")}),!1}function i(e){if("next"===e)T++,M=a(M,"page/"+T+"/"),T<=L&&0===$(b).length&&$("."+x+"-wrapper").before(I(T,M,b));else{var t=$(".mpajax-content-wrapper.loaded:first").height();if(window.scrollTo(0,P.scrollTop()+t),N--,U=a(U,"page/"+N+"/"),0!==N&&0===$("."+y).length&&$(".mpajax-content-wrapper.loaded:first").before(I(N,U,y)),0===N)return $("."+v+"-wrapper, .load-previous-message").remove(),!1}}function l(e,a){var t="."+h+"-"+a,o=S+"-"+a;e.status=504,404==e.status?($(t).before(E("Sorry we are unable to find the page to load",S+" "+o)),s(t,"Unable to load",!0)):500===e.status?($(t).before(E("Sorry something went wrong, please try clicking the load button",S+" "+o)),"next"==a?s(t,"Load more"):s(t,"Load previous")):($(t).before(E("Sorry something went wrong, please try refreshing the page",S+" "+o)),s(t,"Unable to load",!0))}function c(e){for(var a=0;a<e.length;a++){var t=e[a],o=$(t),n=o.parents(".mpajax-content-wrapper").data("section-url");if(!o.length)return!1;o.load(n+" #content .cards "+t+" > *",function(e,a,t){if(4==t.readyState&&"error"==a)return!1})}}function d(){var e=SnapbackCache({bodySelector:"#content",nextPageOffset:function e(){return{nextURL:M,prevURL:U,nextNum:T,prevNum:N}},refreshItems:function e(a){c(a)}});$("#content").on("snapback-cache:loaded",function(e,a){M=a.nextPageOffset.nextURL,T=a.nextPageOffset.nextNum,U=a.nextPageOffset.prevURL,N=a.nextPageOffset.prevNum,R=!1}),$(document).on("click","a",function(){e.cachePage()}),function e(){var a=sessionStorage.pageCache;a&&(a=JSON.parse(a),a[window.location.href]&&(R=!0))}()}function u(){if(!$("body").hasClass("mpajax-init"))return!1;$(document).on("ready",function(){e("#content"),d(),R||($("."+v).click(function(e){e.preventDefault(),$(this).hasClass("disabled")||p("#content .cards",U,".mpajax-placeholder-prev")}),$("."+x).click(function(e){e.preventDefault(),$(this).hasClass("disabled")||p("#content .cards",M,".mpajax-placeholder-next")}))}),P.on("scroll",function(){if(!R){var e=window.pageYOffset||document.documentElement.scrollTop;o(),e>k?(k=e,n()):(k=e,r())}})}var f=window.location.href,m=window.location.search,h="mpajax-load-button",g=h+"-wrapper",v=h+"-prev",x=h+"-next",w="mpajax-placeholder",y=w+"-prev",b=w+"-next",j='<i class="fa fa-spinner fa-pulse fa-fw" style="width: 14px; height: 14px;"></i>',S="mpajax-loading-error-message",C=$(".total-page-count"),_=parseInt(mpajax.startPage),L=0===C.length||isNaN(C.html())?parseInt(mpajax.maxPages):Number(C.html()),P=$(window),N=_-1,T=_+1,U=mpajax.prevPageURL,M=mpajax.nextPageURL,O="",k=0,R=!1,I=function e(a,t,o){return'<div id="mpajax-content-'+a+'" class="'+w+" "+o+'" data-section-name="mpajax-content-wrapper-page-'+a+'" data-section-url="'+t+'"></div>'},D=function e(a,t){return'<div class="'+g+" "+t+'-wrapper" class="clearfix"><button class="button '+h+" "+t+'">'+a+"</button></div>"},E=function e(a,t){return'<div class="mpajax-message '+t+'"><p>'+a+"</p></div>"};u()}(jQuery);
//# sourceMappingURL=./mpajax-infinite-min.js.map